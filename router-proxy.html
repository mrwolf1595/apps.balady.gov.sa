<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <title>رمز الاستجابة السريع</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, viewport-fit=cover">
    <link rel="icon" type="image/x-icon" href="https://apps.balady.gov.sa/BALADYCDN/Content/images/fav.ico">
</head>
<body>
    <script>
        function getParams() {
            const urlParams = new URLSearchParams(window.location.search);
            const currentPath = window.location.pathname;
            
            return {
                key: urlParams.get('key'),
                data: urlParams.get('data'),
                path: currentPath
            };
        }
        
        // جدول التوجيه للـ keys
        const keyRoutes = {
            '7e46a31919881b2bf3e5d5ca6f600000': '/index1.html',
            '5047665a19881b2a74ff415dd6c00000': '/index.html'
        };
        
        function determineTargetFile() {
            const params = getParams();
            
            // إذا كان الـ path يحتوي على ViewAttachments ويعتمد على key parameter
            if (params.path.includes('ViewAttachments') && params.key && keyRoutes[params.key]) {
                return keyRoutes[params.key];
            }
            
            // إذا كان الـ path يحتوي على BuildingLicense ويعتمد على data parameter
            if (params.path.includes('BuildingLicense') && params.data) {
                return '/index.html'; // أو أي ملف تريده للـ data URLs
            }
            
            // الملف الافتراضي
            return '/index.html';
        }
        
        function loadTargetFile() {
            const targetFile = determineTargetFile();
            
            // تحويل فوري للملف المطلوب
            fetch(targetFile)
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    return response.text();
                })
                .then(htmlContent => {
                    // استبدال محتوى الصفحة فوراً
                    document.open();
                    document.write(htmlContent);
                    document.close();
                })
                .catch(error => {
                    console.error('Error loading file:', error);
                    // في حالة الخطأ، توجيه للصفحة الرئيسية
                    window.location.href = '/';
                });
        }
        
        // تحميل الملف فوراً بدون انتظار
        loadTargetFile();
    </script>
</body>
</html>